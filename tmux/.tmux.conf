
set -g mouse on

# bind-key -n C-t display-popup -d "#{pane_current_path}" -w 80% -h 80%
#
# This is perfect for what you want
# bind-key -n C-t display-popup -d "#{pane_current_path}" -w 80% -h 80% -E "tmux new-session -A -s popup"
#
# Better toggle that checks if popup session exists and is attached
bind-key -n C-t if-shell 'tmux has-session -t popup 2>/dev/null && tmux list-clients -t popup | grep -q .' \
    'run-shell "tmux list-clients -t popup -F \"#{client_name}\" | xargs -I {} tmux detach-client -t {}"' \
    'display-popup -d "#{pane_current_path}" -w 55% -h 45% -S fg=blue -b rounded -E "tmux new-session -A -s popup"'

# Toggle status bar

# Keep status bar off by default
set -g status off

# Toggle status bar with Ctrl+s (open/close)
bind-key -n C-s if -F '#{s/off//:status}' 'set status off' 'set status on'
bind-key -n C-s if -F '#{s/off//:status}' 'set status off' 'set status on'


#Toggle the opencode popup
# Better toggle that handles opencode session properly
bind-key -n C-o if-shell 'tmux has-session -t opencode 2>/dev/null && tmux list-clients -t opencode | grep -q .' \
    'run-shell "tmux list-clients -t opencode -F \"#{client_name}\" | xargs -I {} tmux detach-client -t {}"' \
    'display-popup -E -d "#{pane_current_path}" -w 40% -h 85% -S fg=blue -b rounded "tmux new-session -A -s opencode \"opencode #{pane_current_path}\""'
